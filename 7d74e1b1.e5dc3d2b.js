(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{101:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),b=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=b(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=b(n),u=a,m=p["".concat(c,".").concat(u)]||p[u]||d[u]||o;return n?r.a.createElement(m,i(i({ref:t},l),{},{components:n})):r.a.createElement(m,i({ref:t},l))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,c=new Array(o);c[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,c[1]=i;for(var l=2;l<o;l++)c[l]=n[l];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},145:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image3-80a80856dea84b9fba2637b6b6db3b98.png"},208:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image1-f1271a3708c0b3ec1141bd65b163c129.png"},209:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image2-a91eab7d26320782d2140dcc9c2c552a.png"},210:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image4-7b83b6447ef69a3fa4976f22b3ab0860.png"},211:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image5-28e98cd06fce0010293525112eb56ff2.png"},212:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image6-097c8af90f443af2d51812dad9fa23d6.png"},213:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image7-e7651e38b462122f711b8640111d5103.png"},214:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image8-9cf2b831bad61021e091644b1e273606.png"},215:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image9-1ec98ed1dc455ffe29b304e1ffaa054c.png"},216:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image10-25d45bdf57bcb7b3e582be46debb70ee.png"},217:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image11-c58d49189dbebdd568ef1695c869a019.png"},218:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image12-38306411f049075e0e6cd5beecb51006.png"},219:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image13-a69675741809aae8038bbc3eb4bc8e56.png"},220:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image14-b9e8c44142f3a73fdc72bb87bd67c9a9.png"},221:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image15-546df70835da976a7041895852e80ebe.png"},222:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image16-87d985a7ce1442686cffcdc931834d92.png"},223:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image17-c7e14f172d26f0442016374185af14c0.png"},224:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image18-794653627915917f5f54c76f51a2c34b.png"},225:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image19-bd086086c3f22ff112478c615561d539.png"},226:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image20-01b25f621a0597091051bbbc64220559.png"},227:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image21-3b1d82111e49900349bb30966b1e60eb.png"},228:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image22-e1f190f748095c7fcdad2402000e310a.png"},229:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image23-4f2e35d0ba07a35cbb2c2bb514b09d15.png"},230:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image24-8a6e6cc11b5e131f2dd323b6605695da.png"},231:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image25-06cd8f2af56f8d7b770bdab2cb67be99.png"},232:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image26-372894e7fe7582a8d22398a4c3d485f6.png"},233:function(e,t,n){"use strict";n.r(t),t.default="data:image/png;base64,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"},83:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return i})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return b}));var a=n(3),r=n(7),o=(n(0),n(101)),c={id:"access-control-policy",title:"Access Control Policy",description:"Configuring the Access Control Policy on the FMC",hide_table_of_contents:!1},i={unversionedId:"access-control-policy",id:"access-control-policy",isDocsHomePage:!1,title:"Access Control Policy",description:"Configuring the Access Control Policy on the FMC",source:"@site/docs/FMC_AccessControlP.md",slug:"/access-control-policy",permalink:"/securefirewallessentials/docs/access-control-policy",editUrl:"https://securefirewallessentials.github.io/docs/FMC_AccessControlP.md",version:"current",sidebar:"firstSidebar",previous:{title:"SSL Policy",permalink:"/securefirewallessentials/docs/ssl-policy"},next:{title:"SNMP Monitoring",permalink:"/securefirewallessentials/docs/snmp"}},s=[{value:"Introduction",id:"introduction",children:[]},{value:"Background Information",id:"background-information",children:[]},{value:"Access Control",id:"access-control",children:[{value:"Access Control Policy Processing",id:"access-control-policy-processing",children:[]},{value:"ACP Default Action",id:"acp-default-action",children:[]},{value:"Access Rule Order",id:"access-rule-order",children:[]},{value:"Prefilter Policies and Security Intelligence",id:"prefilter-policies-and-security-intelligence",children:[]}]},{value:"Configuration",id:"configuration",children:[]},{value:"Verification/Troubleshooting",id:"verificationtroubleshooting",children:[]},{value:"Summary",id:"summary",children:[]}],l={toc:s};function b(e){var t=e.components,c=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},l,c,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"May 22, 2021"),Object(o.b)("h2",{id:"introduction"},"Introduction"),Object(o.b)("p",null,"This document discusses the Firepower System's Access Control feature's\nkey components and the configuration best practices using a sample\nscenario. Configuration steps are based on Cisco Firepower Management\nCenter v6.6.1, which may differ slightly from previous versions.\xa0"),Object(o.b)("h2",{id:"background-information"},"Background Information"),Object(o.b)("p",null,"One of the essential functions of a firewall is to provide access\ncontrol by determining which network connections enter your network from\nthe outside or leave your network from the inside. The specifics of what\nshould and should not be permitted are beyond this document's scope as\neach network has unique requirements. However, we will provide some best\npractice guidance on structuring your access policy to protect against\nmalicious activity."),Object(o.b)("p",null,"This document focuses on the Access Control policy only. Separate guides\nare available that cover other policies associated with the access\ncontrol policy, such as Network Discovery, Intrusion Prevention (IPS),\nFile and Malware."),Object(o.b)("h2",{id:"access-control"},"Access Control"),Object(o.b)("p",null,"Access Control policies are just one part of the Firepower Threat\nDefense (FTD) feature set that organizations use to control network\ntraffic. As packets ingress the firewall, many checks occur. For\nexample, for the packet part of an existing connection, does the packet\nrequire decryption or network address translation? Once the packet has\nhad these checks applied, it passes into the Access Control Policy\n(ACP)."),Object(o.b)("p",null,"An ACP can be assigned to one or more managed devices. However, a device\ncan only have one ACP deployed at one time. The benefit of assigning a\nsingle ACP to more than one device is that a single change to the policy\nvia the FMC UI can be applied to multiple devices quickly, reducing\noperational overhead."),Object(o.b)("p",null,"Network data that is processed by managed devices can be filtered and\ncontrolled by a set of rules based on:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"simple, easily determined transport and network layer\ncharacteristics: source and destination, ports, protocols and\napplications")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"the latest contextual information on the traffic, including\ncharacteristics such as reputation, risk, business relevance, the\napplication used, or URL visited")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"realm, user, user group, or ISE attribute")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"custom Security Group Tag (SGT)")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"characteristics of encrypted traffic; you can also decrypt this\ntraffic for further analysis")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"whether unencrypted or decrypted traffic contains a prohibited file,\ndetected malware, or intrusion attempt")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"time and day"))),Object(o.b)("p",null,"Each rule within an access policy requires an associated action\ndetermining how to handle the traffic that matches a rule. ",Object(o.b)("em",{parentName:"p"},"Figure\n1")," below details the various rule actions. Additional properties\ndefine how to record the activity in the form of logs or alerts."),Object(o.b)("h3",{id:"access-control-policy-processing"},"Access Control Policy Processing"),Object(o.b)("p",null,"When processing network connections, the firewall matches traffic\nagainst the ACP rules in the order they are specified. Typically, rule\nprocessing is top-down, starting with the policy's first rule and\nmatching against an access control rule when traffic meets all of the\nrule's conditions."),Object(o.b)("p",null,Object(o.b)("img",{alt:"AC Rule Processing",src:n(208).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 1:")," Access Control Policy rule processing"),Object(o.b)("p",null,Object(o.b)("em",{parentName:"p"},"Figure 1")," highlights traffic evaluation as it traverses the\nfirewall. In this example, traffic is evaluated as follows:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Rule 1: Monitor")," evaluates traffic first to track and log network\ntraffic. The system continues to match traffic against additional\nrules to determine whether to permit or deny it.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Rule 2: Trust")," evaluates traffic next. Matching traffic is\nallowed to pass to its destination without further inspection,\nthough it is still subject to identity requirements and rate\nlimiting. Traffic that does not match continues to the next rule.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Rule 3: Block")," evaluates traffic third. Matching traffic is\nblocked without further inspection. Traffic that does not match\ncontinues to the final rule. (Optional) Interactive Block allows a\nuser to bypass the block if deemed appropriate. Typically a\nuser-defined warning message is displayed alongside an interactive\nblock explaining the company security policy.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Rule 4: Allow")," is the final rule. For this rule matching traffic\nis allowed. However, prohibited files, malware, intrusions, and\nexploits within that traffic are detected and blocked. Remaining\nnon-prohibited, non-malicious traffic is allowed to its destination,\nthough it is still subject to identity requirements and rate\nlimiting. You can configure Allow rules that perform only file\ninspection, or only intrusion inspection, or no further inspection.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Default Action")," handles all traffic that does not match any of\nthe rules in the ACP. In this scenario, the default action performs\na Block All, which is considered best practice in most deployments,\nas any traffic that hasn't explicitly been allowed or denied per\nyour organization's strategic security policy should be blocked and\nlogged for further analysis."))),Object(o.b)("h3",{id:"acp-default-action"},"ACP Default Action"),Object(o.b)("p",null,"As seen above, each ACP has a default action. A newly created policy\n(without any custom rules) will direct managed devices targeted by that\npolicy to handle all traffic using the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"default action")),". When rules\nare added to the policy by the firewall administrator, the default\naction applies to the traffic that:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"is not on a Security Intelligence block list")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"is not blocked by SSL inspection")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"does not match any of the rules in the policy defined by the\nadministrator"))),Object(o.b)("p",null,"The default action can be set to block traffic, trust traffic without\nfurther inspection or analyze traffic for intrusion and discovery data."),Object(o.b)("h3",{id:"access-rule-order"},"Access Rule Order"),Object(o.b)("p",null,"Where you place rules in your ACP is important. A specific rule to\n",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"block"))," traffic can be missed if a more general rule ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"allows")),"\ntraffic above it in the policy. Whereas a rule that ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"allows"))," traffic\nmay never trigger if there is a ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"block"))," rule matching traffic before\nit."),Object(o.b)("p",null,"Another effect on rule ordering is performance. Rules that require\nfurther inspection (such as Intrusion Prevention or File and Malware\nprocessing) consume more resources. Therefore, it is advisable to remove\nas many threats as possible using less resource intensive methods such\nas blocking traffic using layer-3/4 criteria (such as IP address,\nsecurity zone and port number)."),Object(o.b)("p",null,'In general, place rules that are likely to be "',Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"hit")),'" the most\ntowards the top of your policy, along with more specific rules. Whenever\npossible, place specific block rules near the top of the policy so that\nthe firewall can make the earliest possible decision on undesirable\ntraffic, especially if those rules block traffic based on layer-3/4\ncriteria. Rules that filter on URL or application should come next,\nfollowed by the more resource intensive rules that require the traffic\nto be processed further by Intrusion and/or file policies.'),Object(o.b)("p",null,"There are no hard and fast rules on how you structure your ACP. However,\nthe guidelines above will help to ensure that you achieve the best\nperformance out of your firewall. The most crucial factor is that you\nhave the correct rules to suit your organization's security needs."),Object(o.b)("h3",{id:"prefilter-policies-and-security-intelligence"},"Prefilter Policies and Security Intelligence"),Object(o.b)("p",null,"Before processing network traffic by the Access Control policy, there\nare additional security checks and controls that can be used to further\nenhance your security posture. These componenets bring advantages both\nin terms of performance fine tuning and security effectiveness."),Object(o.b)("h4",{id:"prefilter-policies"},"Prefilter Policies"),Object(o.b)("p",null,"Prefiltering can be thought of as the first phase of access control\nbefore the firewall passes connections onto more resource intensive\nevaluation controls. A prefilter policy uses limited, outer-header\ncriteria to process connections quickly. The rule actions available in a\nprefilter policy are ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"Fastpath, Block and Analyze")),"."),Object(o.b)("p",null,"The ",Object(o.b)("strong",{parentName:"p"},"Fastpath")," rule action in the prefilter policy bypasses all\nfurther packet inspection and handling, including security intelligence,\nauthentication requirements, SSL decryption, access control rules, deep\ninspection (NGIPS), network discovery and rate limiting."),Object(o.b)("p",null,"Fastpathing traffic is useful where connections are trusted, therefore\nnot requiring further controls or inspection. The real benefit of the\nfastpath action is improved performance."),Object(o.b)("p",null,"The ",Object(o.b)("strong",{parentName:"p"},"Block")," rule action in the prefilter policy allows the system to\nblock connections at the earliest possible stage as they traverse the\nfirewall. Useful for identifiable connections that can be blocked using\nbasic layer-3/4 criteria, discarding them without requiring too much\nprocessing overhead."),Object(o.b)("p",null,"The ",Object(o.b)("strong",{parentName:"p"},"Analyze")," rule action in the prefilter policy is for all other\nconnections that are not being blocked or fastpathed. The Analyze rule\naction tells the policy to pass the connections to the next control\npoint in the packet flow process, including sending the connections to\nthe Security Intelligence checks, access control policy and potentially\nmore advanced controls such as NGIPS and Malware control."),Object(o.b)("h4",{id:"security-intelligence"},"Security Intelligence"),Object(o.b)("p",null,"Security Intelligence (SI) is another early defense against malicious\nactivity applied before passing connections to the access control policy\nfor further processing. SI uses reputation based intelligence backed by\nTalos, the threat intelligence organization at Cisco. It can block\nconnections to or from IP addresses, URLs and domain names using a\nblock-list, improving performance by quickly excluding traffic from\nfurther inspection."),Object(o.b)("p",null,"A ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"Threat"))," license is required to use SI, which enables the regular\nupdate of intelligence feeds. Intelligence feeds are provided by Cisco,\nand the option of using supplemental third-party and custom feeds\nwithout a license. In addition to custom blocklists, creating custom\nallow lists allow for overriding SI blocking if required."),Object(o.b)("h2",{id:"configuration"},"Configuration"),Object(o.b)("p",null,"The following steps guide you by creating a basic Access Control Policy\nand adding rules to control traffic to traverse a managed firewall."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Best Practice:")," With any firewall policy configuration, it is\nrecommended to be as specific as possible. That is to say, have a full\nunderstanding of your companies strategic security policy and the\nrequirements of your users and business operations. This approach will\nallow you to create an access control policy that blocks unwanted\ntraffic, allows everyday business transactions and provides auditing\nthat can help in the event of a breach."),Object(o.b)("p",null,"This example assumes that the firewall is an Internet-facing, edge\nfirewall protecting a trusted, internal network and a semi-trusted DMZ.\nThese scenarios typically have the following requirements:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Only allow limited inbound traffic from the outside (Internet) to\nthe inside or DMZ networks")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Provide access to the Internet for web browsing from internal\nsystems and users in a controlled manner")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Provide backend access between the internal networks and the DMZ")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Ensure logging and auditing of connections to assist in\ntroubleshooting"))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 1:")," Create a new Access Control Policy by navigating to\n",Object(o.b)("strong",{parentName:"p"},"Policies ",">"," Access Control")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 2:")," Click ",Object(o.b)("strong",{parentName:"p"},"New Policy")),Object(o.b)("p",null,Object(o.b)("img",{src:n(209).default})),Object(o.b)("p",null,"Enter a name for the policy along with an optional description."),Object(o.b)("p",null,"Choose ",Object(o.b)("strong",{parentName:"p"},"Block all traffic")," for the ",Object(o.b)("strong",{parentName:"p"},"Default Action")," to ensure that\nany traffic that isn't matched by rules will be blocked."),Object(o.b)("p",null,"Under ",Object(o.b)("strong",{parentName:"p"},"Targeted Devices"),", select the firewall or firewalls that this\npolicy will be applied to and click ",Object(o.b)("strong",{parentName:"p"},"Add to Policy"),"."),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"You can create a policy without specifying target devices,\nwhich is useful if you are designing your policy and do not want to\napply it until you are ready."))),Object(o.b)("p",null,"Clicking ",Object(o.b)("strong",{parentName:"p"},"Save")," presents you with an empty policy (Figure 3):"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Empty AC Policy",src:n(145).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 3:")," New Access Control Policy (empty)"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 3:")," At this stage, if you deployed this policy to a managed\nfirewall, it would block all traffic using the Default Action. To begin\nadding rules, click on the ",Object(o.b)("strong",{parentName:"p"},"Add Rule")," button towards the top-right of\nthe window."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 4:")," First, we will add rules that allow mail and web access to\nservers on the semi-trusted DMZ from the Internet. Before creating the\nrules, it's best to create the network objects we're going to use first\nto reference them in the rules later."),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"Objects can be created in the Object Management window or\ndirectly from within the Add Rule properties. We'll show both so you can\ndecide which method works best for you."))),Object(o.b)("p",null,"  ",Object(o.b)("strong",{parentName:"p"},"Step 4a:")," Navigate to ",Object(o.b)("strong",{parentName:"p"},"Objects ",">"," Object Management")," and click\n",Object(o.b)("strong",{parentName:"p"},"Network")," in on the left-hand side."),Object(o.b)("p",null,"  ",Object(o.b)("strong",{parentName:"p"},"Step 4b:")," At the top of the window, click on the ",Object(o.b)("strong",{parentName:"p"},"Add Network"),"\ndrop-down list and click ",Object(o.b)("strong",{parentName:"p"},"Add Object"),"."),Object(o.b)("p",null,"  ",Object(o.b)("strong",{parentName:"p"},"Step 4c:")," Complete the fields as shown in ",Object(o.b)("em",{parentName:"p"},"Figure 4")," below,\nsubstituting the IP address for your own:"),Object(o.b)("p",null,"  ",Object(o.b)("img",{src:n(210).default})),Object(o.b)("p",null,"  ",Object(o.b)("strong",{parentName:"p"},"Figure 4:")," New Network Object"),Object(o.b)("p",null,"  ",Object(o.b)("strong",{parentName:"p"},"Step 4d"),": Click ",Object(o.b)("strong",{parentName:"p"},"Save")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 5:")," Next, add a rule to the Access Policy created in Step 2 to\nallow web traffic to the server on the DMZ."),Object(o.b)("p",null,"  ",Object(o.b)("strong",{parentName:"p"},"Step 5a:")," Navigate to ",Object(o.b)("strong",{parentName:"p"},"Policies ",">"," Access Control")," and click on the\npencil icon to edit the access control policy."),Object(o.b)("p",null,Object(o.b)("img",{alt:"Edit AC Policy",src:n(145).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 5:")," Edit Access Control Policy"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 5b:")," Click ",Object(o.b)("strong",{parentName:"p"},"+Add Rule")," (over on the top-right hand side)"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 5c:")," General rule properties."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Assign a rule ",Object(o.b)("strong",{parentName:"p"},"Name")," that helps identify the purpose of the rule\nwithout viewing each component in detail.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"The ",Object(o.b)("strong",{parentName:"p"},"Enabled")," checkbox allows the rule to be enabled/disabled")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"The ",Object(o.b)("strong",{parentName:"p"},"Action")," defines how we want the firewall to handle the\ntraffic that matches the rule. In this example, we want to allow the\ntraffic to our web server.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Insert")," lets you choose where rule to appears in the policy. The\nposition can be changed at any time.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"The ",Object(o.b)("strong",{parentName:"p"},"Time Range")," allows you to control when the rule should be\nactive, including setting recurring schedules. This rule is always\nactive, so we'll leave this set to ",Object(o.b)("strong",{parentName:"p"},"None.")))),Object(o.b)("p",null,Object(o.b)("img",{alt:"Rule Properties",src:n(211).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 6:")," General Rule Properties"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 5d:")," Now configure the rule matching criteria. The first tab\nadds ",Object(o.b)("strong",{parentName:"p"},"Zones"),", which in this example from the list of zones available,\nwe've added ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"DMZ"))," to ",Object(o.b)("strong",{parentName:"p"},"Destination")," and ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"Outside"))," to\n",Object(o.b)("strong",{parentName:"p"},"Source"),"."),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"Create Zones under ",Object(o.b)("strong",{parentName:"p"},"Objects ",">"," Object Management ",">","\nInterfaces")," or during device configuration and are used to represent\nsecurity zones made up of one or more interfaces."))),Object(o.b)("p",null,Object(o.b)("img",{alt:"Adding Zones",src:n(212).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 7:")," Adding Zones to the access rule"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 5e:")," Next, we move to the ",Object(o.b)("strong",{parentName:"p"},"Networks")," tab. Here we can control\nwhich source/destination networks/hosts we want to communicate. Figure 8\nshows the completed Networks tab."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"In our example, we're hosting a public webserver with a source\nnetwork of ",Object(o.b)("strong",{parentName:"p"},"ANY,")," which is the default for both source and\ndestination.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"For the destination, look in the list of available networks, select\n",Object(o.b)("strong",{parentName:"p"},"Webserver_Public")," and click ",Object(o.b)("strong",{parentName:"p"},"Add to Destination"),"."),Object(o.b)("div",{parentName:"li",className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},'If the network object doesn\'t exist, you can create one "on\nthe fly." To the right of the "',Object(o.b)("strong",{parentName:"p"},"Available Networks"),'" click the ',Object(o.b)("strong",{parentName:"p"},"+"),"\nsign to create a new network object, as seen in ",Object(o.b)("strong",{parentName:"p"},"Step 4c"),"."))))),Object(o.b)("p",null,Object(o.b)("img",{alt:"Network Objects",src:n(213).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 8:")," Configuring Network object controls"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 5f:")," The ",Object(o.b)("strong",{parentName:"p"},"Applications")," allow the firewall to inspect the\ntraffic to ensure that the correct applications access resources. Again,\nin our example, we are hosting a public webserver, so the applications\nwe want to allow are HTTP and HTTPS."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"From the list of ",Object(o.b)("strong",{parentName:"p"},"Available Applications"),", type ",Object(o.b)("strong",{parentName:"p"},"HTTP")," in the\nsearch box. Then select ",Object(o.b)("strong",{parentName:"p"},"HTTP"),", ",Object(o.b)("strong",{parentName:"p"},"HTTPS")," and click ",Object(o.b)("strong",{parentName:"p"},"Add to\nRule.")),Object(o.b)("div",{parentName:"li",className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"Application Visibility and Control (AVC) causes the firewall\nto inspect the payload of network connections, verifying that the\nconnections contain the allowed application to prevent malicious\nactors from tunneling different applications across standard ports.\nTraditional port-based rules would miss this activity. Combining\n",Object(o.b)("strong",{parentName:"p"},"applications")," and ",Object(o.b)("strong",{parentName:"p"},"ports")," to force applications to use a\nparticular port number provides better access control. For example,\nconfiguring HTTP as the destination application and 80/tcp as the\ndestination port ensures that all HTTP connections occur over port\n80/tcp. With no port specified, then HTTP as an application would be\naccepted over any tcp port."))))),Object(o.b)("p",null,Object(o.b)("img",{alt:"Add Apps",src:n(214).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 9:")," Adding applications to our matching criteria"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 5g:")," The final step in our example rule is to define the Logging\noptions. Move to the Logging tab and check the following boxes:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Log at Beginning of Connection")),Object(o.b)("p",{parentName:"li"},Object(o.b)("em",{parentName:"p"},"Creates a log event when connections are established."))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Log at End of Connection")),Object(o.b)("p",{parentName:"li"},Object(o.b)("em",{parentName:"p"},"Creates a log event when connections are closed."))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Send Connection Events to Event Viewer")),Object(o.b)("p",{parentName:"li"},Object(o.b)("em",{parentName:"p"},"Sends events to the internal event viewer for review.")),Object(o.b)("div",{parentName:"li",className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"Best practice for logging depends on your security strategy\nand regulatory compliance requirements. In general, only log at both\nthe beginning and end of connections if you want to capture audit\ninformation such as duration of connection and the number of bytes\nsent/received.")))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Click ",Object(o.b)("strong",{parentName:"p"},"Add")))),Object(o.b)("p",null,Object(o.b)("img",{alt:"Logging Options",src:n(215).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 10:")," Logging options"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 6:")," Now that the rule is configured, create a ",Object(o.b)("strong",{parentName:"p"},"Network Address\nTranslation (NAT)")," rule so the firewall can forward packets that arrive\ndestined for the webserver's public IP address to it's private\n(internal) address on the DMZ."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 6a:")," ",Object(o.b)("strong",{parentName:"p"},"Navigate to Devices ",">"," NAT"),". Click ",Object(o.b)("strong",{parentName:"p"},"New Policy")," and\nselect ",Object(o.b)("strong",{parentName:"p"},"Threat Defense NAT"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 6b:")," Give the Policy a ",Object(o.b)("strong",{parentName:"p"},"name")," and add your firewall device to\nthe policy by clicking the device name under ",Object(o.b)("strong",{parentName:"p"},"Available Devices")," and\nthen clicking ",Object(o.b)("strong",{parentName:"p"},"Add to Policy"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 6c:")," Click ",Object(o.b)("strong",{parentName:"p"},"+ Add Rule"),". We're going to use an ",Object(o.b)("strong",{parentName:"p"},"Auto NAT\nRule")," in our example to translate connections arriving at the firewall\nfor the webserver. Auto NAT is the simplest form of NAT where the NAT\nrule becomes a parameter for a network object. The network object IP\naddress serves as the original (real) address. Complete the rule using\nthe detail below and ",Object(o.b)("em",{parentName:"p"},"figure 11")," as reference."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Under ",Object(o.b)("strong",{parentName:"p"},"NAT Rule"),", select ",Object(o.b)("strong",{parentName:"p"},"Auto NAT Rule"),".")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"For ",Object(o.b)("strong",{parentName:"p"},"Type"),", select ",Object(o.b)("strong",{parentName:"p"},"Static"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"On the ",Object(o.b)("strong",{parentName:"p"},"Interface Objects tab"),", select ",Object(o.b)("strong",{parentName:"p"},"DMZ")," for the ",Object(o.b)("strong",{parentName:"p"},"Source\nInterface Objects")," and ",Object(o.b)("strong",{parentName:"p"},"Outside")," for the ",Object(o.b)("strong",{parentName:"p"},"Destination Interface\nObjects"),".")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"On the ",Object(o.b)("strong",{parentName:"p"},"Translation tab"),", select ",Object(o.b)("strong",{parentName:"p"},"Webserver_Private")," as the\n",Object(o.b)("strong",{parentName:"p"},"Original Source")," and for ",Object(o.b)("strong",{parentName:"p"},"Translated Source"),", select\n",Object(o.b)("strong",{parentName:"p"},"Address ",">"," Webserver_Public"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Click ",Object(o.b)("strong",{parentName:"p"},"Ok")," and ",Object(o.b)("strong",{parentName:"p"},"save")," the NAT policy."))),Object(o.b)("p",null,Object(o.b)("img",{alt:"NAT",src:n(216).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 11:")," Auto NAT Rule"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 7:")," Repeat Steps 4 to 6 to complete objects, rules and NAT for\ninbound SMTP (mail) access. Create objects that reference the relevant\nIP addresses for the public and private address for your mail server."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 8:")," Next, create a rule to allow general Internet access from\nthe inside network. If not already open, Navigate to Policies ",">"," Access\nControl and edit your access control policy by clicking the pencil icon."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 8a:")," Click ",Object(o.b)("strong",{parentName:"p"},"+Add Rule")," and configure the general rule options\nas below in ",Object(o.b)("em",{parentName:"p"},"Figure 12"),":"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Auto NAT",src:n(217).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 12:")," Outbound Internet rule general options"),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"We're inserting the rule below rule number 2 (our Inbound Web\nAccess rule) as this follows our best practice of placing more specific\nrules above more general rules."))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 8b:")," As done in the Inbound Web Access rule, add the matching\ncriteria for the rule, including zones, applications and logging\noptions. Use the following example settings:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Zones tab:")," Source Zone = ",Object(o.b)("strong",{parentName:"p"},"Inside"),", Destination Zone =\n",Object(o.b)("strong",{parentName:"p"},"Outside")," ",Object(o.b)("em",{parentName:"p"},"Figure 13"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Applications tab:")," Add ",Object(o.b)("strong",{parentName:"p"},"DNS"),", ",Object(o.b)("strong",{parentName:"p"},"HTTP"),", ",Object(o.b)("strong",{parentName:"p"},"HTTPS")," and ",Object(o.b)("strong",{parentName:"p"},"FTP"),"\nto the ",Object(o.b)("strong",{parentName:"p"},"Selected Applications and Filters")," box ",Object(o.b)("em",{parentName:"p"},"Figure 14"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Logging tab:")," Check both ",Object(o.b)("strong",{parentName:"p"},"Log at Beginning")," & ",Object(o.b)("strong",{parentName:"p"},"End of\nConnection")," and Send Connection Events to ",Object(o.b)("strong",{parentName:"p"},"Event Viewer"),"\n",Object(o.b)("em",{parentName:"p"},"Figure 15")))),Object(o.b)("p",null,Object(o.b)("img",{alt:"Outbound Rule",src:n(218).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 13:")," Configure Zones"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Zones",src:n(219).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 14:")," Add Applications to the rule"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Applications",src:n(220).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 15:")," Configure Logging Options"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 8c:")," Click ",Object(o.b)("strong",{parentName:"p"},"Add")," and then click ",Object(o.b)("strong",{parentName:"p"},"Save")," to commit your\nchanges to the policy."),Object(o.b)("p",null,Object(o.b)("img",{alt:"Logging Options",src:n(221).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 16:")," Access Control Policy so far"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 8d:")," To accompany the Outbound Internet rule, we need a NAT rule\nfor connections that originate from our internal (private) network,\ngoing to the Internet with a valid, publicly routable IP address.\nNavigate to ",Object(o.b)("strong",{parentName:"p"},"Devices ",">"," NAT")," and edit your NAT policy by clicking the\n",Object(o.b)("strong",{parentName:"p"},"pencil")," icon."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 8e:")," Click ",Object(o.b)("strong",{parentName:"p"},"+Add Rule"),". This time we're going to use a\n",Object(o.b)("strong",{parentName:"p"},"Dynamic")," ",Object(o.b)("strong",{parentName:"p"},"Auto NAT Rule")," to translate connections leaving the\nfirewall from inside to outside by translating them using a range of\npublic IP addresses. Complete the rule using the detail below and\n",Object(o.b)("em",{parentName:"p"},"Figure 17")," as reference."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Under ",Object(o.b)("strong",{parentName:"p"},"NAT Rule"),", select ",Object(o.b)("strong",{parentName:"p"},"Auto NAT Rule"),".")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"For ",Object(o.b)("strong",{parentName:"p"},"Type"),", select ",Object(o.b)("strong",{parentName:"p"},"Dynamic"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"On the ",Object(o.b)("strong",{parentName:"p"},"Interface Objects tab"),", select ",Object(o.b)("strong",{parentName:"p"},"Inside")," for the ",Object(o.b)("strong",{parentName:"p"},"Source\nInterface Objects")," and ",Object(o.b)("strong",{parentName:"p"},"Outside")," for the ",Object(o.b)("strong",{parentName:"p"},"Destination Interface\nObjects"),".")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"On the ",Object(o.b)("strong",{parentName:"p"},"Translation tab"),", select ",Object(o.b)("strong",{parentName:"p"},"your internal subnet")," as the\n",Object(o.b)("strong",{parentName:"p"},"Original Source")," and for ",Object(o.b)("strong",{parentName:"p"},"Translated Source"),", select\n",Object(o.b)("strong",{parentName:"p"},"Address")," and then click the + sign to add a new network object.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Give the new object a name (e.g. ",Object(o.b)("strong",{parentName:"p"},"Example_NAT_Pool"),"), select\nRange, and enter a valid public IP address range from your available\npublic address space. Enter the range in the form of\n",Object(o.b)("em",{parentName:"p"},"x.x.x.x-x.x.x.x")," (see Figure 18 as an example)."),Object(o.b)("div",{parentName:"li",className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"A more straightforward way of achieving this is to have all\noutbound traffic use the outside interface's IP address as a\ntranslated source address to negate the need to create a NAT\npool/range object. This configuration is useful for smaller or remote\noffice deployments where the number of concurrent outbound connections\nis relatively low.")))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Click ",Object(o.b)("strong",{parentName:"p"},"Save")," to save the new network object and select it from the\ndrop-down list under ",Object(o.b)("strong",{parentName:"p"},"Translated Source"),".")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Click ",Object(o.b)("strong",{parentName:"p"},"Ok")," and ",Object(o.b)("strong",{parentName:"p"},"save")," the NAT policy."))),Object(o.b)("p",null,Object(o.b)("img",{alt:"NAT Rule",src:n(222).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 17:")," Dynamic Auto NAT rule"),Object(o.b)("p",null,Object(o.b)("img",{alt:"DNAT Rule",src:n(223).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 18:")," NAT Pool object example"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 8f:")," Apply URL control to access control rules (optional). If\nyou have a ",Object(o.b)("strong",{parentName:"p"},"URL")," license for your deployment, it is possible to\ncontrol the categories of websites that your users can access. URL\ncontrol uses the Talos web category database that provides control of\n85+ content and threat categories."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 8g:")," Navigate to ",Object(o.b)("strong",{parentName:"p"},"Policies ",">"," Access Control")," and edit your\naccess control policy by clicking the pencil icon. Edit the rule created\nabove in ",Object(o.b)("strong",{parentName:"p"},"Step 8a")," Outbound Internet)."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 8h:")," Move to the ",Object(o.b)("strong",{parentName:"p"},"URLs")," tab for the rule and add the\ncategories you want to allow (or deny if the rule is a block rule) to\nthe ",Object(o.b)("strong",{parentName:"p"},"Selected URLs")," box."),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"You can control access based on ANY URL within a category or\nURLs with a specific reputation score."))),Object(o.b)("p",null,Object(o.b)("img",{alt:"URLs",src:n(224).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 19:")," (Optional) URL Category Control"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 9:")," The final rule in our example is to allow connections\nbetween the inside network and the DMZ for backend communications\nbetween the web server and internal databases or for other required\napplication traffic. This rule does not require NAT, as the DMZ networks\nand inside are private, so we control the routing. However, to add\nadditional security, we will see how to attach ",Object(o.b)("strong",{parentName:"p"},"Intrusion Prevention"),",\n",Object(o.b)("strong",{parentName:"p"},"File")," and ",Object(o.b)("strong",{parentName:"p"},"Malware")," control to the access policy rules."),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"A valid THREAT license (subscription) is required to use NGIPS\npolicies, and a valid Malware license (subscription) is required to\nenable Malware & File control."))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 9a:")," Before we add a rule to our access control policy, we need\nto create a File & Malware policy to attach to our new rule. Navigate to\n",Object(o.b)("strong",{parentName:"p"},"Policies ",">"," Malware & File")," and click ",Object(o.b)("strong",{parentName:"p"},"New File Policy"),". Give the\nfile policy a name, e.g. Block Malware & Executables"),Object(o.b)("p",null,Object(o.b)("img",{alt:"New File Policy",src:n(225).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 20:")," New File Policy"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 9b:")," Click +Add Rule and configure as per Figure 21 below to\nblock executable files and click ",Object(o.b)("strong",{parentName:"p"},"Save"),"."),Object(o.b)("p",null,Object(o.b)("img",{alt:"File Policy",src:n(226).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 21:")," Block executable files"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 9c:")," Click ",Object(o.b)("strong",{parentName:"p"},"+Add Rule")," again and configure as per Figure 22\nbelow to block traffic identified as containing malware."),Object(o.b)("p",null,Object(o.b)("img",{alt:"Add Rule",src:n(227).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 22:")," Block Malware rule"),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"Under File Type Categories, select all except for Executables\n(we're blocking these in the previous rule), Dynamic Analysis Capable\nand Local Malware Analysis Capable."))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 9d:")," Click ",Object(o.b)("strong",{parentName:"p"},"Save")," to save the rule and then ",Object(o.b)("strong",{parentName:"p"},"Save")," again to\ncommit the changes to our Malware & file Policy."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 9e:")," Navigate to ",Object(o.b)("strong",{parentName:"p"},"Policies ",">"," Access Control")," and edit your\naccess control policy by clicking the ",Object(o.b)("strong",{parentName:"p"},"pencil")," icon. Click ",Object(o.b)("strong",{parentName:"p"},"+Add\nRule")," and complete the general rule options as shown here in Figure 23."),Object(o.b)("p",null,Object(o.b)("img",{alt:"Edit AC Policy",src:n(228).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 23:")," General Rule Policy"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 9f:")," Next, add a rule to allow ",Object(o.b)("strong",{parentName:"p"},"ANY")," connections between the\n",Object(o.b)("strong",{parentName:"p"},"Inside")," and ",Object(o.b)("strong",{parentName:"p"},"DMZ")," zones."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Note: After adding the zones, all other tabs can be left as default\n(any).")),Object(o.b)("p",null,Object(o.b)("img",{alt:"AC Rule",src:n(229).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 24:")," Zone configuration"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 9g:")," To add Next Generation Intrusion Prevention (NGIPS) to\ntraffic that matches this rule, move to the ",Object(o.b)("strong",{parentName:"p"},"Inspection")," tab and\nselect the ",Object(o.b)("strong",{parentName:"p"},"Balanced Security and Connectivity")," Intrusion Policy.\nUsing this base policy adds a default SNORT policy to the rule to\nidentify threats and vulnerabilities that may be present in the traffic.\nNGIPS is backed by Cisco's Talos organization,, which is comprised world\nclass threat hunters and security intelligence gathered worldwide."),Object(o.b)("p",null,Object(o.b)("img",{alt:"Zones",src:n(230).default})),Object(o.b)("p",null,Object(o.b)("em",{parentName:"p"},"F"),"igure 25:** Next Generation Intrusion Policy selection"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 9h:")," For ",Object(o.b)("strong",{parentName:"p"},"File Policy"),", select the Malware & File Policy we\ncreated in ",Object(o.b)("strong",{parentName:"p"},"Step 9a"),"."),Object(o.b)("p",null,Object(o.b)("img",{alt:"File Policy",src:n(231).default})),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Figure 26:")," Malware & File Policy selection"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 9i:")," Click ",Object(o.b)("strong",{parentName:"p"},"Save")," to save the rule. Your Access Control Policy\nshould look similar to Figure 26:"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Save AC Policy",src:n(232).default})),Object(o.b)("p",null,Object(o.b)("em",{parentName:"p"},"Figure 27 Completed Access Control Policy")),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"For the last rule, notice that the Intrusion Policy and Malware\n& File Policy icons are active. The icons indicate that the rule has\nadvanced inspection options enabled. Hovering your mouse over the icons\nshows which is which."),Object(o.b)("p",{parentName:"div"},Object(o.b)("img",{alt:"Completed AC Policy",src:n(233).default})))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 9j:")," Click ",Object(o.b)("strong",{parentName:"p"},"Save")," to save the changes to the access control\npolicy."),Object(o.b)("p",null,"Step 10: The access control policy is now ready to deploy to your\ndevice. Navigate to ",Object(o.b)("strong",{parentName:"p"},"Deploy ",">"," Deployment"),". Check the device and then\nclick the ",Object(o.b)("strong",{parentName:"p"},"Deploy")," button."),Object(o.b)("h2",{id:"verificationtroubleshooting"},"Verification/Troubleshooting"),Object(o.b)("p",null,"To verify your configuration, check that you can access devices/networks\nas per your access rules. For example, check that a device (e.g. a web\nbrowser) can access your webserver from the Internet. Also, check that\nusers on the internal network can access the Internet."),Object(o.b)("p",null,"If connectivity isn't as expected, check the event logs for details.\nRemember, we enabled logging on all rules to get this valuable\ninformation."),Object(o.b)("p",null,"Navigate to ",Object(o.b)("strong",{parentName:"p"},"Analysis ",">"," Connections ",">"," Events")," and verify that you\ncan see connection events related to your activity. Then confirm that\nthe ",Object(o.b)("strong",{parentName:"p"},"action")," for that event is what you expect (e.g. allowed/blocked).\nIf not, verify your access control policy rules have the correct action\ndefined. It's a common mistake to create a rule and forget to change the\naction to the desired option."),Object(o.b)("h2",{id:"summary"},"Summary"),Object(o.b)("p",null,"Access Control policies are a crucial component of your Firepower NGFW\ndeployment. They allow you to map your organization's security strategy\nand policies to the network connections that traverse your firewall or\nfirewalls. Granular and flexible, they allow configuration that protects\nand controls up to the application layer. When combined with NGIPS and\nMalware policies, the firewall becomes a powerful, multifaceted threat\ndefense solution."))}b.isMDXComponent=!0}}]);